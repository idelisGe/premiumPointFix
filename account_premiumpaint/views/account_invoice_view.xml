<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <!-- Update account invoice !-->
  <record id="account_invoice_form" model="ir.ui.view">
    <field name="name">Account Invoice</field>
    <field name="model">account.invoice</field>
    <field name="inherit_id" ref="account.invoice_form"/>
    <field name="arch" type="xml">
      <xpath expr="//sheet/group//group[last()]" position="inside">
        <label for="fiscal_printer_status" states="open,paid"/>
        <div class="o_row">
          <field name="fiscal_printer_status" states="open,paid"/>
          <button name="send_invoice_proxy" string="Enviar Impresora Fiscal" class="oe_link" type="object" groups="account.group_account_invoice" attrs="{'invisible':[('fiscal_printer_status', 'in', ['printed']),('state', 'in', ['draft','cancel'])]}"/>
        </div>
      </xpath>
    </field>
  </record>

  <record id="action_send_x_report" model="ir.actions.act_url">
    <field name="name">Reporte X</field>
    <field name="target">self</field>
    <field name="url">http://127.0.0.1:8080/sendcmd/STBY</field>
  </record>
  <record id="action_send_y_report" model="ir.actions.act_url">
    <field name="name">Reporte Z</field>
    <field name="target">self</field>
    <field name="url">http://127.0.0.1:8080/sendcmd/STBa</field>
  </record>

  <menuitem id="account_reports_fiscal_printer_menu" name="Impresora Fiscal" parent="account.menu_finance_reports" sequence="50" groups="account.group_account_user"/>
  <menuitem id="account_reports_x_fiscal_printer_action" name="Reporte X" action="action_send_x_report" parent="account_reports_fiscal_printer_menu" sequence="1"/>
  <menuitem id="account_reports_z_fiscal_printer_action" name="Reporte Z" action="action_send_y_report" parent="account_reports_fiscal_printer_menu" sequence="2"/>
</odoo>
